"use strict";

var _chai = require("chai");

var _moment = _interopRequireDefault(require("moment"));

var _timeUtils = require("./timeUtils");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

describe('Time Utils', function () {
  describe('timeSnap', function () {
    it('should round up to the nearest min', function () {
      var testTime = (0, _moment["default"])('2000-01-01 9:59:50 Z', 'YYYY-MM-DD H:m:s Z');
      var expectedTime = (0, _moment["default"])('2000-01-01 10:00:00 Z', 'YYYY-MM-DD H:m:s Z');
      var snap = 60;
      var actualTime = (0, _timeUtils.timeSnap)(testTime, snap);
      (0, _chai.expect)(actualTime.unix()).to.equal(expectedTime.unix());
    });
    it('should round down to the nearest min', function () {
      var testTime = (0, _moment["default"])('2000-01-01 10:00:20 Z', 'YYYY-MM-DD H:m:s Z');
      var expectedTime = (0, _moment["default"])('2000-01-01 10:00:00 Z', 'YYYY-MM-DD H:m:s Z');
      var snap = 60;
      var actualTime = (0, _timeUtils.timeSnap)(testTime, snap);
      (0, _chai.expect)(actualTime.unix()).to.equal(expectedTime.unix());
    });
    it('should round up when at 30s (nearest min)', function () {
      var testTime = (0, _moment["default"])('2000-01-01 10:00:30 Z', 'YYYY-MM-DD H:m:s Z');
      var expectedTime = (0, _moment["default"])('2000-01-01 10:01:00 Z', 'YYYY-MM-DD H:m:s Z');
      var snap = 60;
      var actualTime = (0, _timeUtils.timeSnap)(testTime, snap);
      (0, _chai.expect)(actualTime.unix()).to.equal(expectedTime.unix());
    });
    it('should round to nearest hour', function () {
      var testTime = (0, _moment["default"])('2000-01-01 10:12:30 Z', 'YYYY-MM-DD H:m:s Z');
      var expectedTime = (0, _moment["default"])('2000-01-01 10:00:00 Z', 'YYYY-MM-DD H:m:s Z');
      var snap = 60 * 60;
      var actualTime = (0, _timeUtils.timeSnap)(testTime, snap);
      (0, _chai.expect)(actualTime.unix()).to.equal(expectedTime.unix());
    });
    it('should round to nearest hour over mid-night', function () {
      var testTime = (0, _moment["default"])('2000-01-01 23:44:40 Z', 'YYYY-MM-DD H:m:s Z');
      var expectedTime = (0, _moment["default"])('2000-01-02 00:00:00 Z', 'YYYY-MM-DD H:m:s Z');
      var snap = 60 * 60;
      var actualTime = (0, _timeUtils.timeSnap)(testTime, snap);
      (0, _chai.expect)(actualTime.unix()).to.equal(expectedTime.unix());
    });
    it('should round up to nearest day', function () {
      var testTime = (0, _moment["default"])('2000-01-01 12:44:40 Z', 'YYYY-MM-DD H:m:s Z');
      var expectedTime = (0, _moment["default"])('2000-01-02 00:00:00 Z', 'YYYY-MM-DD H:m:s Z');
      var snap = 60 * 60 * 24;
      var actualTime = (0, _timeUtils.timeSnap)(testTime, snap);
      (0, _chai.expect)(actualTime.unix()).to.equal(expectedTime.unix());
    });
    it('should round down to nearest day', function () {
      var testTime = (0, _moment["default"])('2000-01-01 11:44:40 Z', 'YYYY-MM-DD H:m:s Z');
      var expectedTime = (0, _moment["default"])('2000-01-01 00:00:00 Z', 'YYYY-MM-DD H:m:s Z');
      var snap = 60 * 60 * 24;
      var actualTime = (0, _timeUtils.timeSnap)(testTime, snap);
      (0, _chai.expect)(actualTime.unix()).to.equal(expectedTime.unix());
    });
  });
  describe('getTimeAtPixel', function () {
    it('should return start time for 0', function () {
      var visStart = (0, _moment["default"])('2000-01-01 00:00:00 Z', 'YYYY-MM-DD H:m:s Z');
      var visEnd = (0, _moment["default"])('2000-01-08 00:00:00 Z', 'YYYY-MM-DD H:m:s Z'); // 7 days

      var timelineWidth = 2000; //2000 px

      var pixelOffset = 0;
      var time = (0, _timeUtils.getTimeAtPixel)(pixelOffset, visStart, visEnd, timelineWidth);
      (0, _chai.expect)(time.unix()).to.equal(visStart.unix());
    });
    it('should return before start for -ve pixels', function () {
      var visStart = (0, _moment["default"])('2000-01-01 00:00:00 Z', 'YYYY-MM-DD H:m:s Z');
      var visEnd = (0, _moment["default"])('2000-01-08 00:00:00 Z', 'YYYY-MM-DD H:m:s Z'); // 7 days

      var timelineWidth = 2000; //2000 px

      var pixelOffset = -40;
      var time = (0, _timeUtils.getTimeAtPixel)(pixelOffset, visStart, visEnd, timelineWidth);
      (0, _chai.expect)(time.unix()).to.lt(visStart.unix());
    });
    it('should return end time for width pixels', function () {
      var visStart = (0, _moment["default"])('2000-01-01 00:00:00 Z', 'YYYY-MM-DD H:m:s Z');
      var visEnd = (0, _moment["default"])('2000-01-08 00:00:00 Z', 'YYYY-MM-DD H:m:s Z'); // 7 days

      var timelineWidth = 2000; //2000 px

      var pixelOffset = 2000;
      var time = (0, _timeUtils.getTimeAtPixel)(pixelOffset, visStart, visEnd, timelineWidth);
      (0, _chai.expect)(time.unix()).to.equal(visEnd.unix());
    });
    it('should return higher than width for over width pixels', function () {
      var visStart = (0, _moment["default"])('2000-01-01 00:00:00 Z', 'YYYY-MM-DD H:m:s Z');
      var visEnd = (0, _moment["default"])('2000-01-08 00:00:00 Z', 'YYYY-MM-DD H:m:s Z'); // 7 days

      var timelineWidth = 2000; //2000 px

      var pixelOffset = 2400;
      var time = (0, _timeUtils.getTimeAtPixel)(pixelOffset, visStart, visEnd, timelineWidth);
      (0, _chai.expect)(time.unix()).to.gt(visEnd.unix());
    });
    it('should return correct fraction of time for given pixel location', function () {
      var visStart = (0, _moment["default"])('2000-01-01 00:00:00 Z', 'YYYY-MM-DD H:m:s Z');
      var visEnd = (0, _moment["default"])('2000-01-08 00:00:00 Z', 'YYYY-MM-DD H:m:s Z'); // 7 days

      var timelineWidth = 2100; //2000 px

      var pixelOffset = 300;
      var expectedTime = visStart.clone().add(pixelOffset / timelineWidth * 7, 'days');
      var time = (0, _timeUtils.getTimeAtPixel)(pixelOffset, visStart, visEnd, timelineWidth);
      (0, _chai.expect)(time.unix()).to.equal(expectedTime.unix());
    });
  });
  describe('getPixelAtTime', function () {
    it('should return 0 for start time', function () {
      var visStart = (0, _moment["default"])('2000-01-01 00:00:00 Z', 'YYYY-MM-DD H:m:s Z');
      var visEnd = (0, _moment["default"])('2000-01-08 00:00:00 Z', 'YYYY-MM-DD H:m:s Z'); // 7 days

      var timelineWidth = 2000; //2000 px

      var testTime = visStart.clone();
      var pixels = (0, _timeUtils.getPixelAtTime)(testTime, visStart, visEnd, timelineWidth);
      (0, _chai.expect)(pixels).to.equal(0);
    });
    it('should return -ve for before start time', function () {
      var visStart = (0, _moment["default"])('2000-01-01 00:00:00 Z', 'YYYY-MM-DD H:m:s Z');
      var visEnd = (0, _moment["default"])('2000-01-08 00:00:00 Z', 'YYYY-MM-DD H:m:s Z'); // 7 days

      var timelineWidth = 2000; //2000 px

      var testTime = (0, _moment["default"])('1999-12-30 00:00:00 Z', 'YYYY-MM-DD H:m:s Z');
      var pixels = (0, _timeUtils.getPixelAtTime)(testTime, visStart, visEnd, timelineWidth);
      (0, _chai.expect)(pixels).to.lt(0);
    });
    it('should return width for end time', function () {
      var visStart = (0, _moment["default"])('2000-01-01 00:00:00 Z', 'YYYY-MM-DD H:m:s Z');
      var visEnd = (0, _moment["default"])('2000-01-08 00:00:00 Z', 'YYYY-MM-DD H:m:s Z'); // 7 days

      var timelineWidth = 2000; //2000 px

      var testTime = visEnd.clone();
      var pixels = (0, _timeUtils.getPixelAtTime)(testTime, visStart, visEnd, timelineWidth);
      (0, _chai.expect)(pixels).to.equal(timelineWidth);
    });
    it('should return greater than width for after end time', function () {
      var visStart = (0, _moment["default"])('2000-01-01 00:00:00 Z', 'YYYY-MM-DD H:m:s Z');
      var visEnd = (0, _moment["default"])('2000-01-08 00:00:00 Z', 'YYYY-MM-DD H:m:s Z'); // 7 days

      var timelineWidth = 2000; //2000 px

      var testTime = (0, _moment["default"])('2000-01-09 00:00:00 Z', 'YYYY-MM-DD H:m:s Z');
      var pixels = (0, _timeUtils.getPixelAtTime)(testTime, visStart, visEnd, timelineWidth);
      (0, _chai.expect)(pixels).to.gt(timelineWidth);
    });
    it('should return correct pixels for given fraction of time', function () {
      var visStart = (0, _moment["default"])('2000-01-01 00:00:00 Z', 'YYYY-MM-DD H:m:s Z');
      var visEnd = (0, _moment["default"])('2000-01-08 00:00:00 Z', 'YYYY-MM-DD H:m:s Z'); // 7 days

      var timelineWidth = 2000; //2000 px

      var testTime = (0, _moment["default"])('2000-01-04 12:00:00 Z', 'YYYY-MM-DD H:m:s Z');
      var expectedPixels = timelineWidth * (3.5 / 7);
      var pixels = (0, _timeUtils.getPixelAtTime)(testTime, visStart, visEnd, timelineWidth);
      (0, _chai.expect)(pixels).to.equal(expectedPixels);
    });
  });
  describe('getDurationFromPixels', function () {
    it('should return 0 for 0 pixels', function () {
      var visStart = (0, _moment["default"])('2000-01-01 00:00:00 Z', 'YYYY-MM-DD H:m:s Z');
      var visEnd = (0, _moment["default"])('2000-01-08 00:00:00 Z', 'YYYY-MM-DD H:m:s Z'); // 7 days

      var timelineWidth = 2000; //2000 px

      var pixelOffset = 0;
      var duration = (0, _timeUtils.getDurationFromPixels)(pixelOffset, visStart, visEnd, timelineWidth);
      (0, _chai.expect)(duration.asSeconds()).to.equal(0);
    });
    it('should return negative duration for -ve pixels', function () {
      var visStart = (0, _moment["default"])('2000-01-01 00:00:00 Z', 'YYYY-MM-DD H:m:s Z');
      var visEnd = (0, _moment["default"])('2000-01-08 00:00:00 Z', 'YYYY-MM-DD H:m:s Z'); // 7 days

      var timelineWidth = 2000; //2000 px

      var pixelOffset = -40;
      var duration = (0, _timeUtils.getDurationFromPixels)(pixelOffset, visStart, visEnd, timelineWidth);
      (0, _chai.expect)(duration.asSeconds()).to.lt(0);
    });
    it('should return (visible end - visible start) for width pixels', function () {
      var visStart = (0, _moment["default"])('2000-01-01 00:00:00 Z', 'YYYY-MM-DD H:m:s Z');
      var visEnd = (0, _moment["default"])('2000-01-08 00:00:00 Z', 'YYYY-MM-DD H:m:s Z'); // 7 days

      var timelineWidth = 2000; //2000 px

      var pixelOffset = 2000;
      var expectedDuration = visEnd.diff(visStart, 'seconds');
      var duration = (0, _timeUtils.getDurationFromPixels)(pixelOffset, visStart, visEnd, timelineWidth);
      (0, _chai.expect)(duration.asSeconds()).to.equal(expectedDuration);
    });
    it('should return higher than (visible end - visible start) for over width pixels', function () {
      var visStart = (0, _moment["default"])('2000-01-01 00:00:00 Z', 'YYYY-MM-DD H:m:s Z');
      var visEnd = (0, _moment["default"])('2000-01-08 00:00:00 Z', 'YYYY-MM-DD H:m:s Z'); // 7 days

      var timelineWidth = 2000; //2000 px

      var pixelOffset = 2400;
      var duration = (0, _timeUtils.getDurationFromPixels)(pixelOffset, visStart, visEnd, timelineWidth);
      (0, _chai.expect)(duration.asSeconds()).to.gt(_moment["default"].duration(7, 'days').asSeconds());
    });
    it('should return correct fraction of duration for given pixel location', function () {
      var visStart = (0, _moment["default"])('2000-01-01 00:00:00 Z', 'YYYY-MM-DD H:m:s Z');
      var visEnd = (0, _moment["default"])('2000-01-08 00:00:00 Z', 'YYYY-MM-DD H:m:s Z'); // 7 days

      var timelineWidth = 2100; //2000 px

      var pixelOffset = 300;
      var expectedDuration = pixelOffset / timelineWidth * 7 * 24 * 60 * 60;
      var duration = (0, _timeUtils.getDurationFromPixels)(pixelOffset, visStart, visEnd, timelineWidth);
      (0, _chai.expect)(duration.asSeconds()).to.equal(expectedDuration);
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91dGlscy90aW1lVXRpbHMudGVzdC5qcyJdLCJuYW1lcyI6WyJkZXNjcmliZSIsIml0IiwidGVzdFRpbWUiLCJleHBlY3RlZFRpbWUiLCJzbmFwIiwiYWN0dWFsVGltZSIsInVuaXgiLCJ0byIsImVxdWFsIiwidmlzU3RhcnQiLCJ2aXNFbmQiLCJ0aW1lbGluZVdpZHRoIiwicGl4ZWxPZmZzZXQiLCJ0aW1lIiwibHQiLCJndCIsImNsb25lIiwiYWRkIiwicGl4ZWxzIiwiZXhwZWN0ZWRQaXhlbHMiLCJkdXJhdGlvbiIsImFzU2Vjb25kcyIsImV4cGVjdGVkRHVyYXRpb24iLCJkaWZmIiwibW9tZW50Il0sIm1hcHBpbmdzIjoiOztBQUFBOztBQUVBOztBQUNBOzs7O0FBRUFBLFFBQVEsQ0FBQyxZQUFELEVBQWUsWUFBVztBQUNoQ0EsRUFBQUEsUUFBUSxDQUFDLFVBQUQsRUFBYSxZQUFXO0FBQzlCQyxJQUFBQSxFQUFFLENBQUMsb0NBQUQsRUFBdUMsWUFBVztBQUNsRCxVQUFNQyxRQUFRLEdBQUcsd0JBQU8sc0JBQVAsRUFBK0Isb0JBQS9CLENBQWpCO0FBQ0EsVUFBTUMsWUFBWSxHQUFHLHdCQUFPLHVCQUFQLEVBQWdDLG9CQUFoQyxDQUFyQjtBQUNBLFVBQU1DLElBQUksR0FBRyxFQUFiO0FBQ0EsVUFBTUMsVUFBVSxHQUFHLHlCQUFTSCxRQUFULEVBQW1CRSxJQUFuQixDQUFuQjtBQUNBLHdCQUFPQyxVQUFVLENBQUNDLElBQVgsRUFBUCxFQUEwQkMsRUFBMUIsQ0FBNkJDLEtBQTdCLENBQW1DTCxZQUFZLENBQUNHLElBQWIsRUFBbkM7QUFDRCxLQU5DLENBQUY7QUFPQUwsSUFBQUEsRUFBRSxDQUFDLHNDQUFELEVBQXlDLFlBQVc7QUFDcEQsVUFBTUMsUUFBUSxHQUFHLHdCQUFPLHVCQUFQLEVBQWdDLG9CQUFoQyxDQUFqQjtBQUNBLFVBQU1DLFlBQVksR0FBRyx3QkFBTyx1QkFBUCxFQUFnQyxvQkFBaEMsQ0FBckI7QUFDQSxVQUFN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R0QsYUFBZixHQUFnQyxDQUFoQyxHQUFvQyxFQUFwQyxHQUF5QyxFQUF6QyxHQUE4QyxFQUF2RTtBQUNBLFVBQUlTLFFBQVEsR0FBRyxzQ0FBc0JSLFdBQXRCLEVBQW1DSCxRQUFuQyxFQUE2Q0MsTUFBN0MsRUFBcURDLGFBQXJELENBQWY7QUFDQSx3QkFBT1MsUUFBUSxDQUFDQyxTQUFULEVBQVAsRUFBNkJkLEVBQTdCLENBQWdDQyxLQUFoQyxDQUFzQ2MsZ0JBQXRDO0FBQ0QsS0FSQyxDQUFGO0FBU0QsR0EzQ08sQ0FBUjtBQTRDRCxDQXRMTyxDQUFSIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtleHBlY3R9IGZyb20gJ2NoYWknO1xyXG5cclxuaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnO1xyXG5pbXBvcnQge3RpbWVTbmFwLCBnZXRUaW1lQXRQaXhlbCwgZ2V0UGl4ZWxBdFRpbWUsIGdldER1cmF0aW9uRnJvbVBpeGVscywgZ2V0U25hcFBpeGVsRnJvbURlbHRhfSBmcm9tICcuL3RpbWVVdGlscyc7XHJcblxyXG5kZXNjcmliZSgnVGltZSBVdGlscycsIGZ1bmN0aW9uKCkge1xyXG4gIGRlc2NyaWJlKCd0aW1lU25hcCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgaXQoJ3Nob3VsZCByb3VuZCB1cCB0byB0aGUgbmVhcmVzdCBtaW4nLCBmdW5jdGlvbigpIHtcclxuICAgICAgY29uc3QgdGVzdFRpbWUgPSBtb21lbnQoJzIwMDAtMDEtMDEgOTo1OTo1MCBaJywgJ1lZWVktTU0tREQgSDptOnMgWicpO1xyXG4gICAgICBjb25zdCBleHBlY3RlZFRpbWUgPSBtb21lbnQoJzIwMDAtMDEtMDEgMTA6MDA6MDAgWicsICdZWVlZLU1NLUREIEg6bTpzIFonKTtcclxuICAgICAgY29uc3Qgc25hcCA9IDYwO1xyXG4gICAgICBjb25zdCBhY3R1YWxUaW1lID0gdGltZVNuYXAodGVzdFRpbWUsIHNuYXApO1xyXG4gICAgICBleHBlY3QoYWN0dWFsVGltZS51bml4KCkpLnRvLmVxdWFsKGV4cGVjdGVkVGltZS51bml4KCkpO1xyXG4gICAgfSk7XHJcbiAgICBpdCgnc2hvdWxkIHJvdW5kIGRvd24gdG8gdGhlIG5lYXJlc3QgbWluJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgIGNvbnN0IHRlc3RUaW1lID0gbW9tZW50KCcyMDAwLTAxLTAxIDEwOjAwOjIwIFonLCAnWVlZWS1NTS1ERCBIOm06cyBaJyk7XHJcbiAgICAgIGNvbnN0IGV4cGVjdGVkVGltZSA9IG1vbWVudCgnMjAwMC0wMS0wMSAxMDowMDowMCBaJywgJ1lZWVktTU0tREQgSDptOnMgWicpO1xyXG4gICAgICBjb25zdCBzbmFwID0gNjA7XHJcbiAgICAgIGNvbnN0IGFjdHVhbFRpbWUgPSB0aW1lU25hcCh0ZXN0VGltZSwgc25hcCk7XHJcbiAgICAgIGV4cGVjdChhY3R1YWxUaW1lLnVuaXgoKSkudG8uZXF1YWwoZXhwZWN0ZWRUaW1lLnVuaXgoKSk7XHJcbiAgICB9KTtcclxuICAgIGl0KCdzaG91bGQgcm91bmQgdXAgd2hlbiBhdCAzMHMgKG5lYXJlc3QgbWluKScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICBjb25zdCB0ZXN0VGltZSA9IG1vbWVudCgnMjAwMC0wMS0wMSAxMDowMDozMCBaJywgJ1lZWVktTU0tREQgSDptOnMgWicpO1xyXG4gICAgICBjb25zdCBleHBlY3RlZFRpbWUgPSBtb21lbnQoJzIwMDAtMDEtMDEgMTA6MDE6MDAgWicsICdZWVlZLU1NLUREIEg6bTpzIFonKTtcclxuICAgICAgY29uc3Qgc25hcCA9IDYwO1xyXG4gICAgICBjb25zdCBhY3R1YWxUaW1lID0gdGltZVNuYXAodGVzdFRpbWUsIHNuYXApO1xyXG4gICAgICBleHBlY3QoYWN0dWFsVGltZS51bml4KCkpLnRvLmVxdWFsKGV4cGVjdGVkVGltZS51bml4KCkpO1xyXG4gICAgfSk7XHJcbiAgICBpdCgnc2hvdWxkIHJvdW5kIHRvIG5lYXJlc3QgaG91cicsIGZ1bmN0aW9uKCkge1xyXG4gICAgICBjb25zdCB0ZXN0VGltZSA9IG1vbWVudCgnMjAwMC0wMS0wMSAxMDoxMjozMCBaJywgJ1lZWVktTU0tREQgSDptOnMgWicpO1xyXG4gICAgICBjb25zdCBleHBlY3RlZFRpbWUgPSBtb21lbnQoJzIwMDAtMDEtMDEgMTA6MDA6MDAgWicsICdZWVlZLU1NLUREIEg6bTpzIFonKTtcclxuICAgICAgY29uc3Qgc25hcCA9IDYwICogNjA7XHJcbiAgICAgIGNvbnN0IGFjdHVhbFRpbWUgPSB0aW1lU25hcCh0ZXN0VGltZSwgc25hcCk7XHJcbiAgICAgIGV4cGVjdChhY3R1YWxUaW1lLnVuaXgoKSkudG8uZXF1YWwoZXhwZWN0ZWRUaW1lLnVuaXgoKSk7XHJcbiAgICB9KTtcclxuICAgIGl0KCdzaG91bGQgcm91bmQgdG8gbmVhcmVzdCBob3VyIG92ZXIgbWlkLW5pZ2h0JywgZnVuY3Rpb24oKSB7XHJcbiAgICAgIGNvbnN0IHRlc3RUaW1lID0gbW9tZW50KCcyMDAwLTAxLTAxIDIzOjQ0OjQwIFonLCAnWVlZWS1NTS1ERCBIOm06cyBaJyk7XHJcbiAgICAgIGNvbnN0IGV4cGVjdGVkVGltZSA9IG1vbWVudCgnMjAwMC0wMS0wMiAwMDowMDowMCBaJywgJ1lZWVktTU0tREQgSDptOnMgWicpO1xyXG4gICAgICBjb25zdCBzbmFwID0gNjAgKiA2MDtcclxuICAgICAgY29uc3QgYWN0dWFsVGltZSA9IHRpbWVTbmFwKHRlc3RUaW1lLCBzbmFwKTtcclxuICAgICAgZXhwZWN0KGFjdHVhbFRpbWUudW5peCgpKS50by5lcXVhbChleHBlY3RlZFRpbWUudW5peCgpKTtcclxuICAgIH0pO1xyXG4gICAgaXQoJ3Nob3VsZCByb3VuZCB1cCB0byBuZWFyZXN0IGRheScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICBjb25zdCB0ZXN0VGltZSA9IG1vbWVudCgnMjAwMC0wMS0wMSAxMjo0NDo0MCBaJywgJ1lZWVktTU0tREQgSDptOnMgWicpO1xyXG4gICAgICBjb25zdCBleHBlY3RlZFRpbWUgPSBtb21lbnQoJzIwMDAtMDEtMDIgMDA6MDA6MDAgWicsICdZWVlZLU1NLUREIEg6bTpzIFonKTtcclxuICAgICAgY29uc3Qgc25hcCA9IDYwICogNjAgKiAyNDtcclxuICAgICAgY29uc3QgYWN0dWFsVGltZSA9IHRpbWVTbmFwKHRlc3RUaW1lLCBzbmFwKTtcclxuICAgICAgZXhwZWN0KGFjdHVhbFRpbWUudW5peCgpKS50by5lcXVhbChleHBlY3RlZFRpbWUudW5peCgpKTtcclxuICAgIH0pO1xyXG4gICAgaXQoJ3Nob3VsZCByb3VuZCBkb3duIHRvIG5lYXJlc3QgZGF5JywgZnVuY3Rpb24oKSB7XHJcbiAgICAgIGNvbnN0IHRlc3RUaW1lID0gbW9tZW50KCcyMDAwLTAxLTAxIDExOjQ0OjQwIFonLCAnWVlZWS1NTS1ERCBIOm06cyBaJyk7XHJcbiAgICAgIGNvbnN0IGV4cGVjdGVkVGltZSA9IG1vbWVudCgnMjAwMC0wMS0wMSAwMDowMDowMCBaJywgJ1lZWVktTU0tREQgSDptOnMgWicpO1xyXG4gICAgICBjb25zdCBzbmFwID0gNjAgKiA2MCAqIDI0O1xyXG4gICAgICBjb25zdCBhY3R1YWxUaW1lID0gdGltZVNuYXAodGVzdFRpbWUsIHNuYXApO1xyXG4gICAgICBleHBlY3QoYWN0dWFsVGltZS51bml4KCkpLnRvLmVxdWFsKGV4cGVjdGVkVGltZS51bml4KCkpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcbiAgZGVzY3JpYmUoJ2dldFRpbWVBdFBpeGVsJywgZnVuY3Rpb24oKSB7XHJcbiAgICBpdCgnc2hvdWxkIHJldHVybiBzdGFydCB0aW1lIGZvciAwJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgIGNvbnN0IHZpc1N0YXJ0ID0gbW9tZW50KCcyMDAwLTAxLTAxIDAwOjAwOjAwIFonLCAnWVlZWS1NTS1ERCBIOm06cyBaJyk7XHJcbiAgICAgIGNvbnN0IHZpc0VuZCA9IG1vbWVudCgnMjAwMC0wMS0wOCAwMDowMDowMCBaJywgJ1lZWVktTU0tREQgSDptOnMgWicpOyAvLyA3IGRheXNcclxuICAgICAgY29uc3QgdGltZWxpbmVXaWR0aCA9IDIwMDA7IC8vMjAwMCBweFxyXG4gICAgICBjb25zdCBwaXhlbE9mZnNldCA9IDA7XHJcbiAgICAgIGxldCB0aW1lID0gZ2V0VGltZUF0UGl4ZWwocGl4ZWxPZmZzZXQsIHZpc1N0YXJ0LCB2aXNFbmQsIHRpbWVsaW5lV2lkdGgpO1xyXG4gICAgICBleHBlY3QodGltZS51bml4KCkpLnRvLmVxdWFsKHZpc1N0YXJ0LnVuaXgoKSk7XHJcbiAgICB9KTtcclxuICAgIGl0KCdzaG91bGQgcmV0dXJuIGJlZm9yZSBzdGFydCBmb3IgLXZlIHBpeGVscycsIGZ1bmN0aW9uKCkge1xyXG4gICAgICBjb25zdCB2aXNTdGFydCA9IG1vbWVudCgnMjAwMC0wMS0wMSAwMDowMDowMCBaJywgJ1lZWVktTU0tREQgSDptOnMgWicpO1xyXG4gICAgICBjb25zdCB2aXNFbmQgPSBtb21lbnQoJzIwMDAtMDEtMDggMDA6MDA6MDAgWicsICdZWVlZLU1NLUREIEg6bTpzIFonKTsgLy8gNyBkYXlzXHJcbiAgICAgIGNvbnN0IHRpbWVsaW5lV2lkdGggPSAyMDAwOyAvLzIwMDAgcHhcclxuICAgICAgY29uc3QgcGl4ZWxPZmZzZXQgPSAtNDA7XHJcbiAgICAgIGxldCB0aW1lID0gZ2V0VGltZUF0UGl4ZWwocGl4ZWxPZmZzZXQsIHZpc1N0YXJ0LCB2aXNFbmQsIHRpbWVsaW5lV2lkdGgpO1xyXG4gICAgICBleHBlY3QodGltZS51bml4KCkpLnRvLmx0KHZpc1N0YXJ0LnVuaXgoKSk7XHJcbiAgICB9KTtcclxuICAgIGl0KCdzaG91bGQgcmV0dXJuIGVuZCB0aW1lIGZvciB3aWR0aCBwaXhlbHMnLCBmdW5jdGlvbigpIHtcclxuICAgICAgY29uc3QgdmlzU3RhcnQgPSBtb21lbnQoJzIwMDAtMDEtMDEgMDA6MDA6MDAgWicsICdZWVlZLU1NLUREIEg6bTpzIFonKTtcclxuICAgICAgY29uc3QgdmlzRW5kID0gbW9tZW50KCcyMDAwLTAxLTA4IDAwOjAwOjAwIFonLCAnWVlZWS1NTS1ERCBIOm06cyBaJyk7IC8vIDcgZGF5c1xyXG4gICAgICBjb25zdCB0aW1lbGluZVdpZHRoID0gMjAwMDsgLy8yMDAwIHB4XHJcbiAgICAgIGNvbnN0IHBpeGVsT2Zmc2V0ID0gMjAwMDtcclxuICAgICAgbGV0IHRpbWUgPSBnZXRUaW1lQXRQaXhlbChwaXhlbE9mZnNldCwgdmlzU3RhcnQsIHZpc0VuZCwgdGltZWxpbmVXaWR0aCk7XHJcbiAgICAgIGV4cGVjdCh0aW1lLnVuaXgoKSkudG8uZXF1YWwodmlzRW5kLnVuaXgoKSk7XHJcbiAgICB9KTtcclxuICAgIGl0KCdzaG91bGQgcmV0dXJuIGhpZ2hlciB0aGFuIHdpZHRoIGZvciBvdmVyIHdpZHRoIHBpeGVscycsIGZ1bmN0aW9uKCkge1xyXG4gICAgICBjb25zdCB2aXNTdGFydCA9IG1vbWVudCgnMjAwMC0wMS0wMSAwMDowMDowMCBaJywgJ1lZWVktTU0tREQgSDptOnMgWicpO1xyXG4gICAgICBjb25zdCB2aXNFbmQgPSBtb21lbnQoJzIwMDAtMDEtMDggMDA6MDA6MDAgWicsICdZWVlZLU1NLUREIEg6bTpzIFonKTsgLy8gNyBkYXlzXHJcbiAgICAgIGNvbnN0IHRpbWVsaW5lV2lkdGggPSAyMDAwOyAvLzIwMDAgcHhcclxuICAgICAgY29uc3QgcGl4ZWxPZmZzZXQgPSAyNDAwO1xyXG4gICAgICBsZXQgdGltZSA9IGdldFRpbWVBdFBpeGVsKHBpeGVsT2Zmc2V0LCB2aXNTdGFydCwgdmlzRW5kLCB0aW1lbGluZVdpZHRoKTtcclxuICAgICAgZXhwZWN0KHRpbWUudW5peCgpKS50by5ndCh2aXNFbmQudW5peCgpKTtcclxuICAgIH0pO1xyXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gY29ycmVjdCBmcmFjdGlvbiBvZiB0aW1lIGZvciBnaXZlbiBwaXhlbCBsb2NhdGlvbicsIGZ1bmN0aW9uKCkge1xyXG4gICAgICBjb25zdCB2aXNTdGFydCA9IG1vbWVudCgnMjAwMC0wMS0wMSAwMDowMDowMCBaJywgJ1lZWVktTU0tREQgSDptOnMgWicpO1xyXG4gICAgICBjb25zdCB2aXNFbmQgPSBtb21lbnQoJzIwMDAtMDEtMDggMDA6MDA6MDAgWicsICdZWVlZLU1NLUREIEg6bTpzIFonKTsgLy8gNyBkYXlzXHJcbiAgICAgIGNvbnN0IHRpbWVsaW5lV2lkdGggPSAyMTAwOyAvLzIwMDAgcHhcclxuICAgICAgY29uc3QgcGl4ZWxPZmZzZXQgPSAzMDA7XHJcbiAgICAgIGNvbnN0IGV4cGVjdGVkVGltZSA9IHZpc1N0YXJ0LmNsb25lKCkuYWRkKChwaXhlbE9mZnNldCAvIHRpbWVsaW5lV2lkdGgpICogNywgJ2RheXMnKTtcclxuICAgICAgbGV0IHRpbWUgPSBnZXRUaW1lQXRQaXhlbChwaXhlbE9mZnNldCwgdmlzU3RhcnQsIHZpc0VuZCwgdGltZWxpbmVXaWR0aCk7XHJcbiAgICAgIGV4cGVjdCh0aW1lLnVuaXgoKSkudG8uZXF1YWwoZXhwZWN0ZWRUaW1lLnVuaXgoKSk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuICBkZXNjcmliZSgnZ2V0UGl4ZWxBdFRpbWUnLCBmdW5jdGlvbigpIHtcclxuICAgIGl0KCdzaG91bGQgcmV0dXJuIDAgZm9yIHN0YXJ0IHRpbWUnLCBmdW5jdGlvbigpIHtcclxuICAgICAgY29uc3QgdmlzU3RhcnQgPSBtb21lbnQoJzIwMDAtMDEtMDEgMDA6MDA6MDAgWicsICdZWVlZLU1NLUREIEg6bTpzIFonKTtcclxuICAgICAgY29uc3QgdmlzRW5kID0gbW9tZW50KCcyMDAwLTAxLTA4IDAwOjAwOjAwIFonLCAnWVlZWS1NTS1ERCBIOm06cyBaJyk7IC8vIDcgZGF5c1xyXG4gICAgICBjb25zdCB0aW1lbGluZVdpZHRoID0gMjAwMDsgLy8yMDAwIHB4XHJcbiAgICAgIGNvbnN0IHRlc3RUaW1lID0gdmlzU3RhcnQuY2xvbmUoKTtcclxuICAgICAgbGV0IHBpeGVscyA9IGdldFBpeGVsQXRUaW1lKHRlc3RUaW1lLCB2aXNTdGFydCwgdmlzRW5kLCB0aW1lbGluZVdpZHRoKTtcclxuICAgICAgZXhwZWN0KHBpeGVscykudG8uZXF1YWwoMCk7XHJcbiAgICB9KTtcclxuICAgIGl0KCdzaG91bGQgcmV0dXJuIC12ZSBmb3IgYmVmb3JlIHN0YXJ0IHRpbWUnLCBmdW5jdGlvbigpIHtcclxuICAgICAgY29uc3QgdmlzU3RhcnQgPSBtb21lbnQoJzIwMDAtMDEtMDEgMDA6MDA6MDAgWicsICdZWVlZLU1NLUREIEg6bTpzIFonKTtcclxuICAgICAgY29uc3QgdmlzRW5kID0gbW9tZW50KCcyMDAwLTAxLTA4IDAwOjAwOjAwIFonLCAnWVlZWS1NTS1ERCBIOm06cyBaJyk7IC8vIDcgZGF5c1xyXG4gICAgICBjb25zdCB0aW1lbGluZVdpZHRoID0gMjAwMDsgLy8yMDAwIHB4XHJcbiAgICAgIGNvbnN0IHRlc3RUaW1lID0gbW9tZW50KCcxOTk5LTEyLTMwIDAwOjAwOjAwIFonLCAnWVlZWS1NTS1ERCBIOm06cyBaJyk7XHJcbiAgICAgIGxldCBwaXhlbHMgPSBnZXRQaXhlbEF0VGltZSh0ZXN0VGltZSwgdmlzU3RhcnQsIHZpc0VuZCwgdGltZWxpbmVXaWR0aCk7XHJcbiAgICAgIGV4cGVjdChwaXhlbHMpLnRvLmx0KDApO1xyXG4gICAgfSk7XHJcbiAgICBpdCgnc2hvdWxkIHJldHVybiB3aWR0aCBmb3IgZW5kIHRpbWUnLCBmdW5jdGlvbigpIHtcclxuICAgICAgY29uc3QgdmlzU3RhcnQgPSBtb21lbnQoJzIwMDAtMDEtMDEgMDA6MDA6MDAgWicsICdZWVlZLU1NLUREIEg6bTpzIFonKTtcclxuICAgICAgY29uc3QgdmlzRW5kID0gbW9tZW50KCcyMDAwLTAxLTA4IDAwOjAwOjAwIFonLCAnWVlZWS1NTS1ERCBIOm06cyBaJyk7IC8vIDcgZGF5c1xyXG4gICAgICBjb25zdCB0aW1lbGluZVdpZHRoID0gMjAwMDsgLy8yMDAwIHB4XHJcbiAgICAgIGNvbnN0IHRlc3RUaW1lID0gdmlzRW5kLmNsb25lKCk7XHJcbiAgICAgIGxldCBwaXhlbHMgPSBnZXRQaXhlbEF0VGltZSh0ZXN0VGltZSwgdmlzU3RhcnQsIHZpc0VuZCwgdGltZWxpbmVXaWR0aCk7XHJcbiAgICAgIGV4cGVjdChwaXhlbHMpLnRvLmVxdWFsKHRpbWVsaW5lV2lkdGgpO1xyXG4gICAgfSk7XHJcbiAgICBpdCgnc2hvdWxkIHJldHVybiBncmVhdGVyIHRoYW4gd2lkdGggZm9yIGFmdGVyIGVuZCB0aW1lJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgIGNvbnN0IHZpc1N0YXJ0ID0gbW9tZW50KCcyMDAwLTAxLTAxIDAwOjAwOjAwIFonLCAnWVlZWS1NTS1ERCBIOm06cyBaJyk7XHJcbiAgICAgIGNvbnN0IHZpc0VuZCA9IG1vbWVudCgnMjAwMC0wMS0wOCAwMDowMDowMCBaJywgJ1lZWVktTU0tREQgSDptOnMgWicpOyAvLyA3IGRheXNcclxuICAgICAgY29uc3QgdGltZWxpbmVXaWR0aCA9IDIwMDA7IC8vMjAwMCBweFxyXG4gICAgICBjb25zdCB0ZXN0VGltZSA9IG1vbWVudCgnMjAwMC0wMS0wOSAwMDowMDowMCBaJywgJ1lZWVktTU0tREQgSDptOnMgWicpO1xyXG4gICAgICBsZXQgcGl4ZWxzID0gZ2V0UGl4ZWxBdFRpbWUodGVzdFRpbWUsIHZpc1N0YXJ0LCB2aXNFbmQsIHRpbWVsaW5lV2lkdGgpO1xyXG4gICAgICBleHBlY3QocGl4ZWxzKS50by5ndCh0aW1lbGluZVdpZHRoKTtcclxuICAgIH0pO1xyXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gY29ycmVjdCBwaXhlbHMgZm9yIGdpdmVuIGZyYWN0aW9uIG9mIHRpbWUnLCBmdW5jdGlvbigpIHtcclxuICAgICAgY29uc3QgdmlzU3RhcnQgPSBtb21lbnQoJzIwMDAtMDEtMDEgMDA6MDA6MDAgWicsICdZWVlZLU1NLUREIEg6bTpzIFonKTtcclxuICAgICAgY29uc3QgdmlzRW5kID0gbW9tZW50KCcyMDAwLTAxLTA4IDAwOjAwOjAwIFonLCAnWVlZWS1NTS1ERCBIOm06cyBaJyk7IC8vIDcgZGF5c1xyXG4gICAgICBjb25zdCB0aW1lbGluZVdpZHRoID0gMjAwMDsgLy8yMDAwIHB4XHJcbiAgICAgIGNvbnN0IHRlc3RUaW1lID0gbW9tZW50KCcyMDAwLTAxLTA0IDEyOjAwOjAwIFonLCAnWVlZWS1NTS1ERCBIOm06cyBaJyk7XHJcbiAgICAgIGNvbnN0IGV4cGVjdGVkUGl4ZWxzID0gdGltZWxpbmVXaWR0aCAqICgzLjUgLyA3KTtcclxuICAgICAgbGV0IHBpeGVscyA9IGdldFBpeGVsQXRUaW1lKHRlc3RUaW1lLCB2aXNTdGFydCwgdmlzRW5kLCB0aW1lbGluZVdpZHRoKTtcclxuICAgICAgZXhwZWN0KHBpeGVscykudG8uZXF1YWwoZXhwZWN0ZWRQaXhlbHMpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcbiAgZGVzY3JpYmUoJ2dldER1cmF0aW9uRnJvbVBpeGVscycsIGZ1bmN0aW9uKCkge1xyXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gMCBmb3IgMCBwaXhlbHMnLCBmdW5jdGlvbigpIHtcclxuICAgICAgY29uc3QgdmlzU3RhcnQgPSBtb21lbnQoJzIwMDAtMDEtMDEgMDA6MDA6MDAgWicsICdZWVlZLU1NLUREIEg6bTpzIFonKTtcclxuICAgICAgY29uc3QgdmlzRW5kID0gbW9tZW50KCcyMDAwLTAxLTA4IDAwOjAwOjAwIFonLCAnWVlZWS1NTS1ERCBIOm06cyBaJyk7IC8vIDcgZGF5c1xyXG4gICAgICBjb25zdCB0aW1lbGluZVdpZHRoID0gMjAwMDsgLy8yMDAwIHB4XHJcbiAgICAgIGNvbnN0IHBpeGVsT2Zmc2V0ID0gMDtcclxuICAgICAgbGV0IGR1cmF0aW9uID0gZ2V0RHVyYXRpb25Gcm9tUGl4ZWxzKHBpeGVsT2Zmc2V0LCB2aXNTdGFydCwgdmlzRW5kLCB0aW1lbGluZVdpZHRoKTtcclxuICAgICAgZXhwZWN0KGR1cmF0aW9uLmFzU2Vjb25kcygpKS50by5lcXVhbCgwKTtcclxuICAgIH0pO1xyXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gbmVnYXRpdmUgZHVyYXRpb24gZm9yIC12ZSBwaXhlbHMnLCBmdW5jdGlvbigpIHtcclxuICAgICAgY29uc3QgdmlzU3RhcnQgPSBtb21lbnQoJzIwMDAtMDEtMDEgMDA6MDA6MDAgWicsICdZWVlZLU1NLUREIEg6bTpzIFonKTtcclxuICAgICAgY29uc3QgdmlzRW5kID0gbW9tZW50KCcyMDAwLTAxLTA4IDAwOjAwOjAwIFonLCAnWVlZWS1NTS1ERCBIOm06cyBaJyk7IC8vIDcgZGF5c1xyXG4gICAgICBjb25zdCB0aW1lbGluZVdpZHRoID0gMjAwMDsgLy8yMDAwIHB4XHJcbiAgICAgIGNvbnN0IHBpeGVsT2Zmc2V0ID0gLTQwO1xyXG4gICAgICBsZXQgZHVyYXRpb24gPSBnZXREdXJhdGlvbkZyb21QaXhlbHMocGl4ZWxPZmZzZXQsIHZpc1N0YXJ0LCB2aXNFbmQsIHRpbWVsaW5lV2lkdGgpO1xyXG4gICAgICBleHBlY3QoZHVyYXRpb24uYXNTZWNvbmRzKCkpLnRvLmx0KDApO1xyXG4gICAgfSk7XHJcbiAgICBpdCgnc2hvdWxkIHJldHVybiAodmlzaWJsZSBlbmQgLSB2aXNpYmxlIHN0YXJ0KSBmb3Igd2lkdGggcGl4ZWxzJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgIGNvbnN0IHZpc1N0YXJ0ID0gbW9tZW50KCcyMDAwLTAxLTAxIDAwOjAwOjAwIFonLCAnWVlZWS1NTS1ERCBIOm06cyBaJyk7XHJcbiAgICAgIGNvbnN0IHZpc0VuZCA9IG1vbWVudCgnMjAwMC0wMS0wOCAwMDowMDowMCBaJywgJ1lZWVktTU0tREQgSDptOnMgWicpOyAvLyA3IGRheXNcclxuICAgICAgY29uc3QgdGltZWxpbmVXaWR0aCA9IDIwMDA7IC8vMjAwMCBweFxyXG4gICAgICBjb25zdCBwaXhlbE9mZnNldCA9IDIwMDA7XHJcbiAgICAgIGNvbnN0IGV4cGVjdGVkRHVyYXRpb24gPSB2aXNFbmQuZGlmZih2aXNTdGFydCwgJ3NlY29uZHMnKTtcclxuICAgICAgbGV0IGR1cmF0aW9uID0gZ2V0RHVyYXRpb25Gcm9tUGl4ZWxzKHBpeGVsT2Zmc2V0LCB2aXNTdGFydCwgdmlzRW5kLCB0aW1lbGluZVdpZHRoKTtcclxuICAgICAgZXhwZWN0KGR1cmF0aW9uLmFzU2Vjb25kcygpKS50by5lcXVhbChleHBlY3RlZER1cmF0aW9uKTtcclxuICAgIH0pO1xyXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gaGlnaGVyIHRoYW4gKHZpc2libGUgZW5kIC0gdmlzaWJsZSBzdGFydCkgZm9yIG92ZXIgd2lkdGggcGl4ZWxzJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgIGNvbnN0IHZpc1N0YXJ0ID0gbW9tZW50KCcyMDAwLTAxLTAxIDAwOjAwOjAwIFonLCAnWVlZWS1NTS1ERCBIOm06cyBaJyk7XHJcbiAgICAgIGNvbnN0IHZpc0VuZCA9IG1vbWVudCgnMjAwMC0wMS0wOCAwMDowMDowMCBaJywgJ1lZWVktTU0tREQgSDptOnMgWicpOyAvLyA3IGRheXNcclxuICAgICAgY29uc3QgdGltZWxpbmVXaWR0aCA9IDIwMDA7IC8vMjAwMCBweFxyXG4gICAgICBjb25zdCBwaXhlbE9mZnNldCA9IDI0MDA7XHJcbiAgICAgIGxldCBkdXJhdGlvbiA9IGdldER1cmF0aW9uRnJvbVBpeGVscyhwaXhlbE9mZnNldCwgdmlzU3RhcnQsIHZpc0VuZCwgdGltZWxpbmVXaWR0aCk7XHJcbiAgICAgIGV4cGVjdChkdXJhdGlvbi5hc1NlY29uZHMoKSkudG8uZ3QobW9tZW50LmR1cmF0aW9uKDcsICdkYXlzJykuYXNTZWNvbmRzKCkpO1xyXG4gICAgfSk7XHJcbiAgICBpdCgnc2hvdWxkIHJldHVybiBjb3JyZWN0IGZyYWN0aW9uIG9mIGR1cmF0aW9uIGZvciBnaXZlbiBwaXhlbCBsb2NhdGlvbicsIGZ1bmN0aW9uKCkge1xyXG4gICAgICBjb25zdCB2aXNTdGFydCA9IG1vbWVudCgnMjAwMC0wMS0wMSAwMDowMDowMCBaJywgJ1lZWVktTU0tREQgSDptOnMgWicpO1xyXG4gICAgICBjb25zdCB2aXNFbmQgPSBtb21lbnQoJzIwMDAtMDEtMDggMDA6MDA6MDAgWicsICdZWVlZLU1NLUREIEg6bTpzIFonKTsgLy8gNyBkYXlzXHJcbiAgICAgIGNvbnN0IHRpbWVsaW5lV2lkdGggPSAyMTAwOyAvLzIwMDAgcHhcclxuICAgICAgY29uc3QgcGl4ZWxPZmZzZXQgPSAzMDA7XHJcbiAgICAgIGNvbnN0IGV4cGVjdGVkRHVyYXRpb24gPSAocGl4ZWxPZmZzZXQgLyB0aW1lbGluZVdpZHRoKSAqIDcgKiAyNCAqIDYwICogNjA7XHJcbiAgICAgIGxldCBkdXJhdGlvbiA9IGdldER1cmF0aW9uRnJvbVBpeGVscyhwaXhlbE9mZnNldCwgdmlzU3RhcnQsIHZpc0VuZCwgdGltZWxpbmVXaWR0aCk7XHJcbiAgICAgIGV4cGVjdChkdXJhdGlvbi5hc1NlY29uZHMoKSkudG8uZXF1YWwoZXhwZWN0ZWREdXJhdGlvbik7XHJcbiAgICB9KTtcclxuICB9KTtcclxufSk7XHJcbiJdfQ==